---
title: Working with Analog‑like Signals on Raspberry Pi (PWM) using SplashKit
description: Raspberry Pi GPIO pins are digital. This guide shows how to simulate analog output with PWM and adjust it interactively, with Local and Remote examples.
author: SplashKit Team
lastupdated: May 2025
---

import { Tabs, TabItem, Steps } from "@astrojs/starlight/components";

**{frontmatter.description}**  
Written by: {frontmatter.author}  
_Last updated: {frontmatter.lastupdated}_

---

:::info[Analog on Raspberry Pi?]
Raspberry Pi **GPIO pins are digital** (HIGH/LOW). To create **analog‑like output**, we use **Pulse Width Modulation (PWM)** which rapidly toggles the pin to approximate different voltage levels over time (duty cycle).  
Reading true analog voltages (e.g., from a potentiometer) requires an **external ADC** (like the MCP3008) connected via SPI/I²C, which is beyond the scope of this guide.
:::

In this guide we will control a PWM pin and allow the user to **increase/decrease** the duty cycle using the keyboard to demonstrate analog‑like behavior (brightness of an LED). We include **Local** and **Remote** versions.

## Circuit

- LED anode (long leg) → **PIN_12** (PWM‑capable) through a current‑limiting resistor (220 Ω – 1 kΩ).  
- LED cathode (short leg) → **GND**.

## Starting the Daemon (for Remote)

```shell
sudo pigpiod
```

:::note
Default port: **8888**. Override with `sudo pigpiod -p <port>`. Ensure the port is reachable for Remote mode.  
See the remote access guide: https://programmers.guide/book/appendix/0-installation/4-0-remote-access-pi/
:::

Stop:
```shell
sudo killall pigpiod
```

## The Code

Use **Left/Right Arrow** to decrease/increase the PWM duty cycle (0–100). Press any key to exit.

<Tabs syncKey="execution-mode">
<TabItem label="Local">

<Tabs syncKey="code-language">
<TabItem label="C++">

```cpp
#include "splashkit.h"

int main()
{
    raspi_init();

    gpio_pin led_pin = PIN_12; // PWM-capable
    int duty = 50;             // start mid brightness

    open_window("analog_pwm_demo", 400, 150);
    write_line("Use LEFT/RIGHT arrows to change brightness. Any key to quit.");

    while(!any_key_pressed())
    {
        process_events();

        if (key_down(LEFT_KEY))  duty = duty > 0   ? duty - 1 : 0;
        if (key_down(RIGHT_KEY)) duty = duty < 100 ? duty + 1 : 100;

        raspi_pwm_write(led_pin, duty);
        delay(10);
    }

    raspi_pwm_write(led_pin, 0);
    close_all_windows();
    raspi_cleanup();
    return 0;
}
```

</TabItem>
<TabItem label="C#">

<Tabs syncKey="csharp-style">
<TabItem label="Top-level Statements">

```csharp
using SplashKitSDK;
using static SplashKitSDK.SplashKit;

RaspiInit();

GpioPin ledPin = (GpioPin)12;
int duty = 50;

OpenWindow("analog_pwm_demo", 400, 150);
WriteLine("Use LEFT/RIGHT arrows to change brightness. Any key to quit.");

while(!AnyKeyPressed())
{
    ProcessEvents();

    if (KeyDown(KeyCode.LeftKey))  duty = duty > 0   ? duty - 1 : 0;
    if (KeyDown(KeyCode.RightKey)) duty = duty < 100 ? duty + 1 : 100;

    RaspiPwmWrite(ledPin, duty);
    Delay(10);
}

RaspiPwmWrite(ledPin, 0);
CloseAllWindows();
RaspiCleanup();
```

</TabItem>
<TabItem label="Object-Oriented">

```csharp
using SplashKitSDK;

namespace RaspberryPiAnalogPwm
{
    public class Program
    {
        public static void Main()
        {
            SplashKit.RaspiInit();

            GpioPin ledPin = GpioPin.Pin12;
            int duty = 50;

            SplashKit.OpenWindow("analog_pwm_demo", 400, 150);
            SplashKit.WriteLine("Use LEFT/RIGHT arrows to change brightness. Any key to quit.");

            while (!SplashKit.AnyKeyPressed())
            {
                SplashKit.ProcessEvents();

                if (SplashKit.KeyDown(KeyCode.LeftKey))  duty = duty > 0   ? duty - 1 : 0;
                if (SplashKit.KeyDown(KeyCode.RightKey)) duty = duty < 100 ? duty + 1 : 100;

                SplashKit.RaspiPwmWrite(ledPin, duty);
                SplashKit.Delay(10);
            }

            SplashKit.RaspiPwmWrite(ledPin, 0);
            SplashKit.CloseAllWindows();
            SplashKit.RaspiCleanup();
        }
    }
}
```
</TabItem>
</Tabs>
</TabItem> <!-- end Local -->

<TabItem label="Remote">

:::note
**Remote mode requires the Raspberry Pi daemon** to be running on the target Pi.  
Default port: **8888**. You can override with `sudo pigpiod -p <port>`.
:::

**How Remote works:**  
Call `remote_raspi_init(name, ip, port)` → get a `connection` → pass to all `remote_` GPIO calls.

<Tabs syncKey="code-language">
<TabItem label="C++">

```cpp
#include "splashkit.h"

int main()
{
    connection conn = remote_raspi_init("pi1", "192.168.1.42", 8888);

    gpio_pin led_pin = PIN_12;
    int duty = 50;

    open_window("analog_pwm_demo", 400, 150);
    write_line("Use LEFT/RIGHT arrows to change brightness. Any key to quit.");

    while(!any_key_pressed())
    {
        process_events();

        if (key_down(LEFT_KEY))  duty = duty > 0   ? duty - 1 : 0;
        if (key_down(RIGHT_KEY)) duty = duty < 100 ? duty + 1 : 100;

        remote_raspi_pwm_write(conn, led_pin, duty);
        delay(10);
    }

    remote_raspi_pwm_write(conn, led_pin, 0);
    close_all_windows();
    remote_raspi_cleanup(conn);
    return 0;
}
```

</TabItem>
<TabItem label="C#">

<Tabs syncKey="csharp-style">
<TabItem label="Top-level Statements">

```csharp
using SplashKitSDK;
using static SplashKitSDK.SplashKit;

var conn = RemoteRaspiInit("pi1", "192.168.1.42", 8888);

GpioPin ledPin = (GpioPin)12;
int duty = 50;

OpenWindow("analog_pwm_demo", 400, 150);
WriteLine("Use LEFT/RIGHT arrows to change brightness. Any key to quit.");

while(!AnyKeyPressed())
{
    ProcessEvents();

    if (KeyDown(KeyCode.LeftKey))  duty = duty > 0   ? duty - 1 : 0;
    if (KeyDown(KeyCode.RightKey)) duty = duty < 100 ? duty + 1 : 100;

    RemoteRaspiPwmWrite(conn, ledPin, duty);
    Delay(10);
}

RemoteRaspiPwmWrite(conn, ledPin, 0);
CloseAllWindows();
RemoteRaspiCleanup(conn);
```

</TabItem>
<TabItem label="Object-Oriented">

```csharp
using SplashKitSDK;

namespace RaspberryPiAnalogPwm
{
    public class Program
    {
        public static void Main()
        {
            var conn = SplashKit.RemoteRaspiInit("pi1", "192.168.1.42", 8888);

            GpioPin ledPin = GpioPin.Pin12;
            int duty = 50;

            SplashKit.OpenWindow("analog_pwm_demo", 400, 150);
            SplashKit.WriteLine("Use LEFT/RIGHT arrows to change brightness. Any key to quit.");

            while (!SplashKit.AnyKeyPressed())
            {
                SplashKit.ProcessEvents();

                if (SplashKit.KeyDown(KeyCode.LeftKey))  duty = duty > 0   ? duty - 1 : 0;
                if (SplashKit.KeyDown(KeyCode.RightKey)) duty = duty < 100 ? duty + 1 : 100;

                SplashKit.RemoteRaspiPwmWrite(conn, ledPin, duty);
                SplashKit.Delay(10);
            }

            SplashKit.RemoteRaspiPwmWrite(conn, ledPin, 0);
            SplashKit.CloseAllWindows();
            SplashKit.RemoteRaspiCleanup(conn);
        }
    }
}
```
</TabItem>
</Tabs>
</TabItem> <!-- end Remote -->
</Tabs> <!-- end execution-mode -->

### Understanding the code

<Steps>

1. **Initialise / Connect**  
   - Local: `raspi_init()` / `RaspiInit()`  
   - Remote: `remote_raspi_init(name, ip, port)` returns `connection`.

2. **PWM Output**  
   - We vary duty cycle 0–100% to simulate analog brightness.

3. **Interactive Control**  
   - Use arrow keys to adjust duty. A small delay stabilises input.

4. **Cleanup**  
   - Write 0% duty on exit, close the window, and cleanup GPIO (or `remote_raspi_cleanup(conn)`).

</Steps>

### Build and run

<Tabs syncKey="code-language">
<TabItem label="C++">

```shell
g++ analog_pwm.cpp -l SplashKit -o analog_pwm
./analog_pwm
```

</TabItem>
<TabItem label="C#">

```shell
dotnet build
dotnet run
```
</TabItem>
</Tabs>
